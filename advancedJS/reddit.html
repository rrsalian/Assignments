<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        * {
            padding: 0;
            border: 0;
        }

        body {
            width: 100vw;
            height: 100vh;
            padding: 0;
            border: 0;
        }

        #subreddit {
            border: 1px solid black ;
        }

        #srchBtn {
            width: 50px;
            height: 20px;
            border-radius: 5px;
            color: grey;
            background-color: yellow;
            border: 1px solid green;
        }

        #dataSection {
            display: flex;
            flex-direction: column;
            background-color: bisque;
            align-items: center;
        }

        .title {
            color: blue;
            font-family: Arial, Helvetica, sans-serif;
            font-weight: 500;
            padding: 5px;
        }

        .image {
            padding-bottom: 20px;
        }
    </style>
</head>

<body>

    <main id="main">
        <section id="srcSection">
            <scan>
                <input id="subreddit" type="text" name="subreddit" />
                <button id="srchBtn" type="button" name="search">Search</button>
            </scan>
        </section>
        <section id="dataSection">

        </section>
    </main>

    <script>
        const dataSection = document.getElementById('dataSection');
        const subElement = document.getElementById('subreddit');
        
        function getData(subReddit = 'aww') {

            const url = `https://www.reddit.com/r/${subReddit}/.json`;            
            const domain = (new URL(url));
            const urlHost = "https://" + domain.hostname + "/";
            console.log(url);
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    console.log(data.data.children.length);
                    for (let title of data.data.children) {
                        const getTitle = document.createElement('a');
                        const getImage = document.createElement('img');
                        getTitle.classList.add('title');
                        getTitle.innerText = title.data.title;
                        const getUrl = urlHost + title.data.permalink;
                        getTitle.setAttribute("href", getUrl);
                        getImage.classList.add('image');

                        if (title.data.thumbnail === "self")
                            getImage.src = "https://emoji.redditmedia.com/l73ksapw1guz_t5_3nqvj/pupper";
                        else
                            getImage.src = title.data.thumbnail;

                        dataSection.append(getTitle);
                        dataSection.append(getImage);
                    } 
                });
        }

        let subReddit = "aww";
        getData(subReddit);

        const srchBtn = document.getElementById('srchBtn');        
        srchBtn.addEventListener('click', (e) => {            
            while (dataSection.firstChild) {
                dataSection.firstChild.remove()
            }
            console.log(`subReddit ${subReddit}`);

            if (subElement.value === "") 
                subReddit = "aww";
            else 
                subReddit = subElement.value;

            getData(subReddit);
        });
    </script>
</body>

</html>